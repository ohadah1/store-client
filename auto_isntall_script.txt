#!/bin/bash
sudo yum install -y nginx 
sudo yum install -y npm
sudo yum install -y nodejs.x86_64
sudo yum install -y git 
sudo mkdir /home/ec2-user/store
sudo git clone https://fungroup123:Ohad123123\!@github.com/ohadah1/store-client.git /home/ec2-user/store/.
sudo npm install --prefix /home/ec2-user/store/client/
alias ng="/home/ec2-user/store/client/node_modules/@angular/cli/bin/ng"
sudo npm run --prefix /home/ec2-user/store/client/ build
sudo npm install /home/ec2-user/store/server/
sudo node /home/ec2-user/store/server/src/app.js
sudo cp -R /home/ec2-user/store/client/dist /usr/share/nginx/html/
sudo chmod -R 644 /usr/share/nginx/html/*
sudo chcon -R -u system_u -r object_r -t httpd_sys_content_t /usr/share/nginx/html/*
sudo systemctl enable nginx
sudo systemctl start nginx